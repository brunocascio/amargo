server:
  port: 3000
  host: "0.0.0.0"
  # Enable HTTP cache headers
  cache:
    enabled: true
    maxAge: 3600 # 1 hour default

database:
  url: "${DATABASE_URL}"

storage:
  # Default storage provider
  default: "s3"
  
  providers:
    s3:
      type: "s3"
      endpoint: "${S3_ENDPOINT}"
      accessKey: "${S3_ACCESS_KEY}"
      secretKey: "${S3_SECRET_KEY}"
      bucket: "${S3_BUCKET}"
      region: "${S3_REGION:-us-east-1}"
      forcePathStyle: ${S3_FORCE_PATH_STYLE:-false}
    
    gcs:
      type: "gcs"
      keyFile: "${GCS_KEY_FILE}"
      bucket: "${GCS_BUCKET}"
    
    azure:
      type: "azure"
      connectionString: "${AZURE_STORAGE_CONNECTION_STRING}"
      container: "${AZURE_CONTAINER}"

repositories:
  # NPM repository (proxy)
  npm:
    format: "npm"
    type: "proxy"
    enabled: true
    upstream: "https://registry.npmjs.org"
    cacheTtl: 3600 # 1 hour
    path: "/npm"
  
  # Docker proxy to Docker Hub
  docker-proxy:
    format: "docker"
    type: "proxy"
    enabled: true
    upstream: "https://registry-1.docker.io"
    cacheTtl: 1800 # 30 minutes
    path: "/v2/docker-proxy"
  
  # Docker hosted repository (for private images)
  docker-hosted:
    format: "docker"
    type: "hosted"
    enabled: true
    cacheTtl: 86400 # 24 hours
    path: "/v2/docker-hosted"
  
  # Docker proxy to Nexus
  docker-nexus:
    format: "docker"
    type: "proxy"
    enabled: true
    upstream: "https://nexus.itspty.com:5002"
    cacheTtl: 1800 # 30 minutes
    path: "/v2/docker-nexus"

  # PyPI repository (proxy)
  pypi:
    format: "pypi"
    type: "proxy"
    enabled: true
    upstream: "https://pypi.org"
    cacheTtl: 7200 # 2 hours
    path: "/pypi"

# Repository groups - combine multiple repositories
groups:
  # Docker group: combines hosted + proxy + nexus
  docker:
    format: "docker"
    enabled: true
    path: "/v2"
    members:
      - name: "docker-hosted"
        priority: 1  # Check hosted first
      - name: "docker-nexus"
        priority: 2  # Finally check Nexus proxy
      - name: "docker-proxy"
        priority: 3  # Then check Docker Hub proxy
  
  # NPM group (example for future expansion)
  npm-public:
    format: "npm"
    enabled: true
    path: "/npm-group"
    members:
      - name: "npm"
        priority: 1

cache:
  # Global cache settings
  cleanupInterval: 3600 # 1 hour
  maxSize: "100GB" # Per repository
  
  # Repository-specific overrides
  repositories:
    docker:
      maxSize: "500GB" # Docker images are larger
      
logging:
  level: "info"
  format: "json"